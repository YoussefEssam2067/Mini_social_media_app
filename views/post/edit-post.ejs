<%- include('../partials/headerProfile') %>

<div class="container mt-5">
  <h1>Edit Post</h1>
  <form
    action="/posts/<%= post.id %>/edit-post"
    method="POST"
    enctype="multipart/form-data"
  >
    <div class="mb-3">
      <label for="title" class="form-label">Title</label>
      <input
        type="text"
        class="form-control"
        id="title"
        name="title"
        value="<%= post.title %>"
        required
      />
    </div>
    <div class="mb-3">
      <label for="content" class="form-label">Content</label>
      <textarea
        class="form-control"
        id="content"
        name="content"
        rows="5"
        required
      >
<%= post.content %></textarea
      >
    </div>
    <div class="mb-3">
      <label for="images" class="form-label">Images</label>
      <input
        type="file"
        class="form-control"
        id="images"
        name="images"
        accept="images/*"
        multiple
      />
      <% if (post.images) { %>
      <div class="mt-3">
        <p>Current Images:</p>
        <div
          id="carouselPost<%= post.id %>"
          class="carousel slide"
          data-bs-ride="carousel"
        >
          <div class="carousel-inner">
            <% post.images.forEach((image, index) => { %>
            <div
              class="text-center carousel-item <%= index === 0 ? 'active' : '' %>"
            >
              <img
                src="/uploads/posts/<%= image %>"
                alt="Post Image"
                class="img-thumbnail"
                style="max-width: 100%; height: auto; margin-bottom: 10px"
              />
            </div>
            <% }) %>
          </div>
          <button
            class="carousel-control-prev"
            type="button"
            data-bs-target="#carouselPost<%= post.id %>"
            data-bs-slide="prev"
          >
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button
            class="carousel-control-next"
            type="button"
            data-bs-target="#carouselPost<%= post.id %>"
            data-bs-slide="next"
          >
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>
      </div>
      <% } %>
    </div>
    <button type="submit" class="btn btn-success mb-3">Update Post</button>
  </form>
</div>

<%- include('../partials/footer') %>
